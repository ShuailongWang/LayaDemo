(function () {
    'use strict';

    /**
     * AS_Dialog.js
    */
    class AS_Dialog extends Laya.Dialog {
        constructor() {
            super();

            this.width = 320;
            this.height = 240;
            //不在屏幕上显示
            this.isPopupCenter = false;
            //拖动区域
            this.dragArea = '0,0' + this.width + ',' + this.height;
            //加载场景
            this.loadScene('AS_Dialog');
        }

        onEnable() {
            this.btn_close.on(Laya.Event.CLICK, this, function(e){
                this.close();
            });
        }
    }

    /**
     * About_Clip.js
    */
    class About_Clip extends Laya.Scene {
        constructor() {
            super();
        }

        onEnable() {
            this.clip1.index = 8;

            this.btn_dialog.on(Laya.Event.CLICK, this, function(e){
                var dialog = new AS_Dialog();
                dialog.x = 50;
                dialog.y = 150;
                // dialog.popup(); //弹出
                dialog.show();    //
            });
        }
    }

    /**
     * About_List.js
    */

    class About_List extends Laya.Scene {
        constructor() {
            super();
        }

        onEnable() {
            this.dataArray = [
                {
                    nickName:'定海神珠',                    //跟boxItem中变量名一致
                    headImg:'img/headImage/head1.jpg',
                    praise:1
                },
                {
                    nickName:'SS',
                    headImg:'img/headImage/head2.jpg',
                    praise:1
                },
                {
                    nickName:'蓝色眼泪',
                    headImg:'img/headImage/head3.jpg',
                    praise:1
                },
                {
                    nickName:'睡觉家住',
                    headImg:'img/headImage/head4.jpg',
                    praise:1
                },
                {
                    nickName:'背包妻子',
                    headImg:'img/headImage/head5.jpg',
                    praise:1
                },
                {
                    nickName:'Alison_fan',
                    headImg:'img/headImage/head6.jpg',
                    praise:1
                },
                {
                    nickName:'善良的大黑',
                    headImg:'img/headImage/head7.jpg',
                    praise:1
                }
            ];
            this.list1.array = this.dataArray;
        }
    }


    About_List.prototype.onRender = function(cell, index) {
        var data = this.dataArray[index];
        var headImg = cell.getChildByName('headImg');
        headImg.skin = data.headImg;
        var nickName = cell.getChildByName('nickName');
        nickName.text = data.nickName;
        var praise = cell.getChildByName('praise');
        praise.text = data.praise;
    };

    /**
     * ItemCell.js
    */
    class ItemCell extends Laya.Box {
        constructor() {
            super();
        }

        onEnable() {
            var praise = this.getChildByName('praise');
            var btn_praise = this.getChildByName('btn_praise');

            btn_praise.on(Laya.Event.CLICK, this, function(e) {
                e.stopPropagation();
                this.dataSource.praise++;
                praise.text = this.dataSource.praise;
            });
        }
    }

    /**
     * About_Text.js
    */

    class About_Text extends Laya.Scene {
        constructor() {
            super();
        }

        onEnable() {
            var string1 = "\n鹅、鹅、鹅\n取向先天个\n白毛浮绿水\红掌拨拼搏";
            var string2 = "\n鹅\n鹅\n鹅\n取向\n先天个\n白毛\n浮绿水\红掌\n拨拼搏";

            //如果在面板中，设置var的名字为var_part,那么在代码中可以使用this.var_part,
            this.Label_1.text += string1;
            this.Text_1.text += string1;
            this.TextInput_1.text += string1;
            this.TextArea_1.text += string2;
            this.TextArea_1.editable = false;
        }
    }

    /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */

    class GameConfig {
        static init() {
            //注册Script或者Runtime引用
            let reg = Laya.ClassUtils.regClass;
    		reg("script/About_Clip.js",About_Clip);
    		reg("script/About_List.js",About_List);
    		reg("script/ItemCell.js",ItemCell);
    		reg("script/About_Text.js",About_Text);
        }
    }
    GameConfig.width = 720;
    GameConfig.height = 1280;
    GameConfig.scaleMode ="showall";
    GameConfig.screenMode = "none";
    GameConfig.alignV = "top";
    GameConfig.alignH = "left";
    GameConfig.startScene = "About_Image.scene";
    GameConfig.sceneRoot = "";
    GameConfig.debug = false;
    GameConfig.stat = false;
    GameConfig.physicsDebug = false;
    GameConfig.exportSceneToJson = true;

    GameConfig.init();

    class Main {
    	constructor() {
    		//根据IDE设置初始化引擎		
    		if (window["Laya3D"]) Laya3D.init(GameConfig.width, GameConfig.height);
    		else Laya.init(GameConfig.width, GameConfig.height, Laya["WebGL"]);
    		Laya["Physics"] && Laya["Physics"].enable();
    		Laya["DebugPanel"] && Laya["DebugPanel"].enable();
    		Laya.stage.scaleMode = GameConfig.scaleMode;
    		Laya.stage.screenMode = GameConfig.screenMode;
    		Laya.stage.alignV = GameConfig.alignV;
    		Laya.stage.alignH = GameConfig.alignH;
    		//兼容微信不支持加载scene后缀场景
    		Laya.URL.exportSceneToJson = GameConfig.exportSceneToJson;

    		//打开调试面板（通过IDE设置调试模式，或者url地址增加debug=true参数，均可打开调试面板）
    		if (GameConfig.debug || Laya.Utils.getQueryString("debug") == "true") Laya.enableDebugPanel();
    		if (GameConfig.physicsDebug && Laya["PhysicsDebugDraw"]) Laya["PhysicsDebugDraw"].enable();
    		if (GameConfig.stat) Laya.Stat.show();
    		Laya.alertGlobalError(true);

    		//激活资源版本控制，version.json由IDE发布功能自动生成，如果没有也不影响后续流程
    		Laya.ResourceVersion.enable("version.json", Laya.Handler.create(this, this.onVersionLoaded), Laya.ResourceVersion.FILENAME_VERSION);
    	}

    	onVersionLoaded() {
    		//激活大小图映射，加载小图的时候，如果发现小图在大图合集里面，则优先加载大图合集，而不是小图
    		Laya.AtlasInfoManager.enable("fileconfig.json", Laya.Handler.create(this, this.onConfigLoaded));
    	}

    	onConfigLoaded() {
    		//加载IDE指定的场景
    		GameConfig.startScene && Laya.Scene.open(GameConfig.startScene);

    		//舞台背景颜色
    		Laya.stage.bgColor = "#aabbcc";
    	}
    }
    //激活启动类
    new Main();

}());
